/* Base */
html, body {
  height: 100%;
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  background: white;
}

#app { height: 100%; }

/* Fade helpers */
.fade-in { animation: fadeIn 600ms ease forwards; }
.fade-out { animation: fadeOut 450ms ease forwards; }

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(6px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes fadeOut {
  from { opacity: 1; }
  to   { opacity: 0; }
}

/* Screen 0: "Error" text on blank page */
.error-top-left {
  position: fixed;
  top: 12px;
  left: 12px;
  font-size: 12px;
  color: #888;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}

/* Center helper */
.center {
  height: 100%;
  display: grid;
  place-items: center;
  padding: 24px;
  text-align: center;
}

.intro-text {
  font-size: clamp(22px, 4vw, 44px);
  font-weight: 800;
  letter-spacing: -0.02em;
}

/* Screen 2: scene layout */
.scene {
  height: 100%;
  display: grid;
  grid-template-rows: 1fr auto;
  overflow: hidden;
}

/* Sky */
.sky {
  position: relative;
  background: linear-gradient(#cfe9ff, #f7fbff);
  overflow: hidden;
}

/* Background neighborhood */
.neighborhood {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.clouds {
  position: absolute;
  top: 10%;
  left: -30%;
  width: 160%;
  height: 120px;
  opacity: 0.55;
  background:
    radial-gradient(circle at 10% 60%, #fff 0 22px, transparent 23px),
    radial-gradient(circle at 16% 55%, #fff 0 30px, transparent 31px),
    radial-gradient(circle at 24% 62%, #fff 0 20px, transparent 21px),
    radial-gradient(circle at 58% 55%, #fff 0 26px, transparent 27px),
    radial-gradient(circle at 65% 62%, #fff 0 18px, transparent 19px),
    radial-gradient(circle at 72% 52%, #fff 0 34px, transparent 35px);
  animation: drift 22s linear infinite;
}

@keyframes drift {
  from { transform: translateX(0); }
  to   { transform: translateX(18%); }
}

.houses {
  position: absolute;
  left: -10%;
  right: -10%;
  bottom: 26vh; /* sits above the street */
  height: 200px;
  opacity: 0.9;
  background:
    /* far row */
    repeating-linear-gradient(
      90deg,
      rgba(0,0,0,0.0) 0 30px,
      rgba(0,0,0,0.06) 30px 34px
    );
}

.houses::before,
.houses::after {
  content: "";
  position: absolute;
  inset: 0;
}

/* Farther houses */
.houses::before {
  bottom: 0;
  background:
    repeating-linear-gradient(90deg,
      transparent 0 40px,
      rgba(40,70,110,0.18) 40px 120px
    );
  mask:
    linear-gradient(#000, #000) top/100% 100%;
  filter: blur(0.2px);
  transform: translateY(24px);
  opacity: 0.55;
}

/* Closer houses with roofs */
.houses::after {
  bottom: -12px;
  background:
    repeating-linear-gradient(90deg,
      rgba(60,90,130,0.22) 0 90px,
      rgba(255,255,255,0.0) 90px 110px
    );
  clip-path: polygon(
    0% 100%,
    0% 55%,
    5% 55%,
    8% 40%,
    18% 40%,
    22% 55%,
    32% 55%,
    36% 35%,
    46% 35%,
    50% 55%,
    60% 55%,
    64% 38%,
    74% 38%,
    78% 55%,
    88% 55%,
    92% 42%,
    100% 42%,
    100% 100%
  );
  opacity: 0.75;
}

.trees {
  position: absolute;
  left: -20%;
  right: -20%;
  bottom: 26vh;
  height: 130px;
  opacity: 0.7;
  background:
    radial-gradient(circle at 6% 80%, rgba(30,120,80,0.35) 0 30px, transparent 31px),
    radial-gradient(circle at 12% 85%, rgba(30,120,80,0.35) 0 24px, transparent 25px),
    radial-gradient(circle at 22% 82%, rgba(30,120,80,0.35) 0 28px, transparent 29px),
    radial-gradient(circle at 37% 86%, rgba(30,120,80,0.35) 0 26px, transparent 27px),
    radial-gradient(circle at 52% 80%, rgba(30,120,80,0.35) 0 30px, transparent 31px),
    radial-gradient(circle at 67% 84%, rgba(30,120,80,0.35) 0 24px, transparent 25px),
    radial-gradient(circle at 78% 82%, rgba(30,120,80,0.35) 0 28px, transparent 29px),
    radial-gradient(circle at 92% 86%, rgba(30,120,80,0.35) 0 26px, transparent 27px);
}

/* Overlay */
.overlay {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  padding: 24px;
}

.card {
  width: min(680px, 92vw);
  background: rgba(255,255,255,0.90);
  border: 1px solid rgba(0,0,0,0.08);
  border-radius: 18px;
  padding: 18px;
  box-shadow: 0 14px 40px rgba(0,0,0,0.10);
  text-align: center;
  backdrop-filter: blur(6px);
}

.question {
  margin: 0 0 10px;
  font-size: clamp(20px, 3.5vw, 36px);
  font-weight: 800;
}

.subtext {
  margin: 0 0 12px;
  font-size: 14px;
  opacity: 0.75;
}

.btn-row {
  position: relative;
  width: min(520px, 90%);
  margin: 0 auto;
  display: flex;
  justify-content: center;
  gap: 12px;
  flex-wrap: wrap;
  padding: 14px 10px 6px;
}

button {
  border: 0;
  border-radius: 999px;
  padding: 12px 18px;
  font-size: 16px;
  font-weight: 800;
  cursor: pointer;
  transition: transform 120ms ease, filter 120ms ease;
  position: relative;
}

button:active { transform: scale(0.98); }

.btn-yes { background: #ff4d88; color: white; }
.btn-yes:hover { filter: brightness(1.03); }

.btn-no { background: #222; color: white; }

/* Warning text */
.warning {
  margin-top: 12px;
  min-height: 22px;
  font-weight: 900;
  color: #c4002a;
}

/* Street */
.street {
  height: 26vh;
  min-height: 170px;
  background: linear-gradient(#2b2b2b, #1f1f1f);
  position: relative;
}

/* Lane line */
.street::before {
  content: "";
  position: absolute;
  left: 0; right: 0;
  top: 48%;
  height: 6px;
  background:
    repeating-linear-gradient(
      90deg,
      #ffd54a 0 42px,
      transparent 42px 76px
    );
  opacity: 0.85;
}

/* Duck walking on street (not flying) */
.duck {
  position: absolute;
  left: -10%;
  bottom: 18px; /* sits on street */
  font-size: 64px;
  user-select: none;
  filter: drop-shadow(0 10px 10px rgba(0,0,0,0.18));
  animation:
    duckMove 7.5s linear infinite,
    duckBob 420ms ease-in-out infinite;
}

@keyframes duckMove {
  0%   { transform: translateX(0); }
  100% { transform: translateX(130vw); }
}

@keyframes duckBob {
  0%, 100% { translate: 0 0; }
  50% { translate: 0 -5px; }
}

/* Duck "footstep" dots */
.footsteps {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 22px;
  height: 6px;
  opacity: 0.25;
  background:
    radial-gradient(circle at 10% 50%, #fff 0 2px, transparent 3px),
    radial-gradient(circle at 14% 50%, #fff 0 2px, transparent 3px),
    radial-gradient(circle at 18% 50%, #fff 0 2px, transparent 3px);
  animation: steps 520ms linear infinite;
}
@keyframes steps {
  from { transform: translateX(0); }
  to   { transform: translateX(-20px); }
}

/* Screen 3: favorites collage */
.final {
  height: 100%;
  padding: 24px;
  background: radial-gradient(circle at 20% 10%, #ffe3ee 0 22%, transparent 40%),
              radial-gradient(circle at 80% 20%, #ffe9f2 0 20%, transparent 42%),
              linear-gradient(#fff0f6, #ffffff);
  overflow: hidden;
}

.hearts-bg {
  position: absolute;
  inset: -30%;
  opacity: 0.18;
  font-size: 34px;
  transform: rotate(-12deg);
  line-height: 1.4;
  user-select: none;
}

.final-wrap {
  position: relative;
  max-width: 980px;
  margin: 0 auto;
  display: grid;
  gap: 14px;
}

.final-title {
  text-align: center;
  padding: 10px 0 6px;
}
.final-title h1 {
  margin: 0;
  font-size: clamp(22px, 4vw, 44px);
}
.final-title p {
  margin: 8px 0 0;
  opacity: 0.75;
}

.grid {
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  gap: 12px;
}

.tile {
  grid-column: span 6;
  background: rgba(255,255,255,0.90);
  border: 1px solid rgba(0,0,0,0.08);
  border-radius: 18px;
  padding: 14px;
  box-shadow: 0 12px 30px rgba(0,0,0,0.08);
  backdrop-filter: blur(6px);
  display: grid;
  gap: 8px;
  min-height: 96px;
}

@media (max-width: 720px) {
  .tile { grid-column: span 12; }
}

.big-emoji {
  font-size: 34px;
}
.tile h3 {
  margin: 0;
  font-size: 16px;
  font-weight: 900;
}
.tile p {
  margin: 0;
  opacity: 0.78;
  font-size: 14px;
}
